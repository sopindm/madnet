(defprotocol IChannel
  (read [this channel])
  (write [this readable]))

(defprotocol ISequence [Iterable ISeqable IClonable]
  (^ISequenceReader reader [this])
  (^ISequenceWriter writer [this])
  (size [this] (size reader))
  (free-space [this] (size writer))
          (iterator [this]) ;over reader
  (get [this index]) ;in reader
  (seq [this]) ;seq reader
  (read [this seq])
  (write [this seq]))              

(defprotocol IBuffer
  (size [this])
  (range [begin end]))

(defclass ASequence [ISequence] [buffer ^IntegerRange readAt ^IntegerRange writeAt])

          
